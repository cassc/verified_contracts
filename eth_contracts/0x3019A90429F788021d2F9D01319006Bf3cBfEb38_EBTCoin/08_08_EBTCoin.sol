//                    ▄▄▄     ▄▄▄▄▄▄▄                _  _ ___   ___                 .===. (
//                  █   █   █  ▄    █               | || |__ \ / _ \                |   |  )
//                  █   █▄▄▄█ █ █   █               | || |_ ) | | | |               |   | (
//                  █    ▄  █ █▄█   █               |__   _/ /| | | |               |   | )
//                  █   █ █ █▄▄▄    █                  | |/ /_| |_| |               |    \*/
//                  █   █▄█ █   █   █                  |_|____|\___/               ,'    //.
//                  █▄▄▄▄▄▄▄█   █▄▄▄█                                             :~~~~~//~~;  
//                                                                                `.  //   .'
//                                                                                 `-------'             
//                  
//                ⣿⣿⣧⠹⣿⣿⣿⠃⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⢸⣿⣿⣿⣿⣿⣿⠁⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⢸⣿⣿⣿⣿
//                ⣿⣿⣿⣧⠻⣿⣿⠀⣿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣆⠘⢿⣿⣿⣿⣿⠃⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢣⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣧⡈⠻⠀⣿⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⡈⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⠘⣿⣿⣿⡏⢀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⢁⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠆⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣷⣦⠀⢿⡽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠈⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠀⠈⠉⠉⠀⠺⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠃⠈⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠇⢸⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⡄⡹⣿⡽⣿⣿⣿⣿⣿⣿⣿⣿⡟⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠋⠀⠀⠀⠒⠒⠒⠒⠀⠀⠲⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣆⠘⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⠇⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⡇⡱⢏⣿⣻⣿⣿⣿⣿⣿⢯⡷⠃⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠒⠒⠀⠀⠀⠀⢼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣆⠃⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡃⢿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⣧⠘⡭⣞⣿⣻⣿⣿⣻⣞⡿⢃⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⣶⣶⣶⣶⣶⡆⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠙⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⣦⠻⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⡿⠀⢳⡜⣷⣻⣞⣷⣻⠾⢁⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡯⠀⠀⠀⠙⠛⠛⠛⠛⠃⠀⠀⠸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⡸⣿⣿⣿⣿⣿⣿⣿⣿⠀⠿⣷⡹⣿
//                ⣿⣿⣿⣿⣿⡿⢋⡴⠆⠱⣎⡵⣟⣾⣳⢯⠃⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⠀⠀⠀⠁⠀⠀⠀⠀⠀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠹⣿⣿⣿⣿⣿⣿⡿⢸⣷⣜⢿⣿
//                ⣿⣿⣿⣿⡟⠁⢉⣤⡞⠐⢺⣜⣻⢮⣟⠃⣼⣿⣿⣿⣿⡿⠛⢽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡀⠈⠀⠀⠀⠀⠀⠠⠀⠈⠀⣸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠆⠍⡙⢿⣿⣿⣿⣇⢹⣿⣿⣿⣿⣿⡇⠈⣻⣿⠈⢿
//                ⣿⣿⣿⣿⠁⢰⣿⣿⠁⡆⠱⢮⡹⣯⡟⢰⣿⣿⣿⣿⡏⡄⠀⠒⢨⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣦⣀⠀⠀⢀⣀⣤⣶⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢿⡶⠘⠁⠰⣆⢻⣿⣿⣿⡄⣿⣿⣿⣿⣿⡇⢀⣿⣿⢡⡈
//                ⣿⣿⣿⣿⡀⠈⠿⣿⠈⢁⠈⢷⣙⣷⡃⣼⣿⣿⣿⣿⣇⠳⣦⣩⠺⢛⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣌⠳⠶⡆⠃⣡⣾⣿⣿⣿⠃⢹⣿⣿⣿⣿⡇⢺⣿⠏⡼⢡
//                ⣿⣿⣿⣿⣿⣦⣤⣶⣅⠸⠀⡳⢬⡷⡅⢻⣿⣿⣿⣿⣿⣷⣦⣤⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠃⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣶⣾⣿⣿⣿⣿⣿⠀⣸⣿⣿⣿⣿⡇⢶⣤⣤⣶⣿
//                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠆⡙⡆⣿⡅⠸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠁⠀⡟⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠄⣿⣿⣿⣿⣿⡅⢻⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⢸⡱⢏⣾⡀⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠛⠠⠘⢣⠈⠳⣻⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠋⣸⣿⣿⣿⣿⣿⡂⣿⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠠⡝⣎⢷⣳⡀⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⠋⠀⣠⣴⣷⣬⡑⠢⠌⠛⠾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠃⣴⣿⣿⣿⣿⣿⣿⠆⣿⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⡝⣢⢯⣳⢻⢦⡌⠻⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠛⠀⣀⣴⣾⣿⣿⣇⣿⣿⣶⣬⣁⠢⠌⡙⠻⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠋⣠⣾⣿⣿⣿⣿⣿⣿⣿⠃⣿⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⢣⡓⡜⣧⣏⡟⣾⠀⡤⣌⢉⠛⠛⠛⠛⠛⣉⠉⠄⢀⣠⣴⣾⣿⣿⣿⣿⣿⣷⣿⣿⣿⣻⣿⣿⣶⣤⣅⣐⠀⠌⠉⠉⠉⠉⢉⣉⣠⣤⡆⢰⣿⣿⣿⣿⣿⣿⣿⣿⣿⠁⣿⣿⣿⣿⣿
//                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⢰⠹⣜⠲⣭⠞⣵⠀⣷⢬⣍⡚⠁⠋⢘⣁⣠⣴⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⢸⡿⣿⣿⣿⣿⣿⣿⣿⣿⢀⣿⣿⣿⣿⣿
//
//
//                        .="=.
//                      _/.-.-.\_     _
//                     ( ( o o ) )    ))
//                      |/  "  \|    //
//      .-------.        \'---'/    //
//     _|~~ ~~  |_       /`"""`\\  ((
//   =(_|_______|_)=    / /_,_\ \\  \\                              Our ape is bored
//     |:::::::::|      \_\\_'__/ \  ))
//     |:::::::[]|       /`  /`~\  |//
//     |o=======.|      /   /    \  /
//     `"""""""""`  ,--`,--'\/\    /
//                   '-- "--'  '--'
//                                 
//                                      $EBT!
//                      __------__                    ....................................................
//                    /~          ~\                  ....................................................
//                   |    //^\\//^\|                  ........................./\.........................
//                 /~~\  ||  o| |o|:~\                ..................______/__\_______.................      || __   ||
//                | |6   ||___|_|_||:|                ..................||-------------||.................      ||=\_`\=||
//                 \__.  /      o  \/'                ..................||             ||.................      || (__/ ||
//                  |   (       O   )                 ..................||    \|||/    ||.................      ||  | | :-"""-.
//         /~~~~\    `\  \         /                  ..................||   [ @[email protected] ]   ||.................      ||==| \/-=-.   \
//        | |~~\ |     )  ~------~`\                  ..................||    ( ' )    ||.......       ...      ||  |(_|o o/   |_
//       /' |  | |   /     ____ /~~~)\                ..................||    _(O)_    ||.......|$EBT |...      ||   \/ "  \   ,_)
//      (_/'   | | |     /'    |    ( |               ..................||   / >=< \   ||.......|==>> |...      ||====\ ^  /__/
//             | | |     \    /   __)/ \              ..................||__/_|_:_|_\__||.................      ||     ;--'  `-.
//             \  \ \      \/    /' \   `\            ..................-----------------.................      ||    /      .  \
//               \  \|\        /   | |\___|           ....................................................      ||===;        \  \
//                 \ |  \____/     | |                ....................................................      ||   |         | |
//                 /^~>  \        _/ <                                                                          || .-\ '     _/_/
//                |  |         \       \                                                                        |:'  _;.    (_  \
//                |  | \        \        \                                                                       /  .'  `;\   \\_/
//                -^-\  \       |        )                                                                      |_ /     |||  |\\
//                     `\_______/^\______/                                                                    /  _)=====|||  | ||
//                                                                                                           /  /|      ||/  / //
//                                                                                                           \_/||      ( `-/ ||
//                                                                                                              ||======/  /  \\ .-.
//                                                                                                              ||      \_/    \'-'/
//                                                                                                              ||      ||      `"`
//                                                                                                              ||======||
//                                                                                                              ||      ||
// SPDX-License-Identifier: MIT
// OpenZeppelin Contracts (last updated v4.6.0) (token/ERC20/IERC20.sol)
// File: contracts/EBTCoin.sol

pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Burnable.sol";
import "@openzeppelin/contracts/security/Pausable.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

contract EBTCoin is Ownable, ERC20, Pausable {
    bool public limited;
    uint256 public maxHoldingAmount;
    uint256 public minHoldingAmount;
    address public uniswapV2Pair;
    address public feeReceiver;
    mapping(address => bool) public blacklists;

    constructor(address _lpWallet, address _ecoWallet, address _airdropWallet, address _feeReceiver) ERC20("EBTCoin", "$EBT") {
        uint256 totalSupply = 69_420_800_855 * 10**18; // Set total supply to 69,420,800,855 tokens
        _mint(_lpWallet, totalSupply * 69420 / 100000);     // 69.420% for LP
        _mint(_airdropWallet, totalSupply * (100000 - 69420 - 5000) / 100000);  // Adjusted percentage for airdrop
        _mint(_ecoWallet, totalSupply * 50 / 1000);      // 5% for ecosystem

        feeReceiver = _feeReceiver;
    }

    function pause() external onlyOwner {
        _pause();
    }

    function unpause() external onlyOwner {
        _unpause();
    }

    function blacklist(address _address, bool _isBlacklisting) external onlyOwner {
        blacklists[_address] = _isBlacklisting;
    }

    function setRule(bool _limited, address _uniswapV2Pair, uint256 _minHoldingAmount) external onlyOwner {
        limited = _limited;
        uniswapV2Pair = _uniswapV2Pair;
        maxHoldingAmount = totalSupply() * 42069 / 1000000; // Set the maxHoldingAmount to 4.2069% of total supply
        minHoldingAmount = _minHoldingAmount;
    }

    function _beforeTokenTransfer(
        address from,
        address to,
        uint256 amount
    ) override(ERC20) internal virtual whenNotPaused {
        super._beforeTokenTransfer(from, to, amount);
        require(!blacklists[to] && !blacklists[from], "Blacklisted");

        if (limited && from == uniswapV2Pair) {
            require(super.balanceOf(to) + amount <= maxHoldingAmount && super.balanceOf(to) + amount >= minHoldingAmount, "Forbid");
        }
    }


    function _transfer(
        address sender,
        address recipient,
        uint256 amount
    ) internal virtual override {
        if (feeReceiver != address(0) && recipient != feeReceiver) {
            uint256 feeAmount = amount * 42069 / 10000000; // Calculate the 0.42069% service fee
            super._transfer(sender, feeReceiver, feeAmount); // Transfer the service fee to the feeReceiver
            super._transfer(sender, recipient, amount - feeAmount); // Transfer the remaining amount to the recipient
        } else {
            super._transfer(sender, recipient, amount);
        }
    }

    function burn(uint256 value) external {
        _burn(msg.sender, value);
    }
}