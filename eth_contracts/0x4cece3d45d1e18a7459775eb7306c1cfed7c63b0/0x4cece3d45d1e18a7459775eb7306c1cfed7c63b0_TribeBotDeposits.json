{"SourceCode": "{{\r\n  \"language\": \"Solidity\",\r\n  \"sources\": {\r\n    \"contracts/TribeBotDeposits.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: UNLICENSED\\npragma solidity 0.8.20;\\n\\ninterface IERC20 {\\n  function transferFrom(address from, address to, uint256 amount) external;\\n  function transfer(address to, uint256 amount) external;\\n  function balanceOf(address user) external view returns (uint256);\\n}\\n\\ncontract TribeBotDeposits {\\n  address public owner;\\n\\n  event Deposit(uint256 user, uint256 amount);\\n  event Withdraw(uint256 user, address receiver, uint256 amount);\\n  event WithdrawFeees(address receiver, uint256 amount);\\n  event FeeChanged(uint256 feeOnDeposit, uint256 feeOnWithdraw);\\n\\n  IERC20 public immutable TRIBE;\\n  uint256 public constant feeBase = 10000;\\n  uint256 public feeOnDeposit = 100;\\n  uint256 public feeOnWithdraw = 100;\\n  uint256 public userBalances = 0;\\n\\n  constructor(address tribe, address newOwner){\\n    TRIBE = IERC20(tribe);\\n    owner = newOwner;\\n    emit FeeChanged(feeOnDeposit, feeOnWithdraw);\\n  }\\n\\n  modifier onlyOwner(){\\n    require(msg.sender == owner);\\n    _;\\n  }\\n\\n  function transferOwnership(address _new) external onlyOwner {\\n    owner = _new;\\n  }\\n\\n  function deposit(uint256 user, uint256 amount) external {\\n    uint256 balanceBefore = TRIBE.balanceOf(address(this));\\n    TRIBE.transferFrom(msg.sender, address(this), amount);\\n    // check actual deposit, which can vary from amount due to fee on transfer\\n    uint256 deposited = TRIBE.balanceOf(address(this)) - balanceBefore;\\n\\n    // deduct fees, amount added to user balance is received tribe minus fees\\n    if (feeOnDeposit > 0) {\\n      uint256 fee = deposited * feeOnDeposit / feeBase;\\n      deposited = deposited - fee;\\n    }\\n\\n    userBalances += deposited;\\n\\n    emit Deposit(user, deposited);\\n  }\\n\\n  function withdraw(uint256 user, address receiver, uint256 amount) external onlyOwner {\\n    // deduct fees, amount to withdraw from user balance is amount minus fees. Received amount will depend on transfer tax.\\n    uint256 withdrawAmount = amount;\\n    if (feeOnWithdraw > 0) {\\n      uint256 fee = amount * feeOnWithdraw / feeBase;\\n      withdrawAmount = withdrawAmount - fee;\\n    }\\n\\n    TRIBE.transfer(receiver, withdrawAmount);\\n\\n    userBalances -= withdrawAmount;\\n\\n    emit Withdraw(user, receiver, amount);\\n  }\\n\\n  function recover(address token, address to, uint256 amount) external onlyOwner {\\n    IERC20(token).transfer(to, amount);\\n  }\\n\\n  function changeFees(uint256 _feeOnDeposit, uint256 _feeOnWithdraw) external onlyOwner {\\n    feeOnDeposit = _feeOnDeposit;\\n    feeOnWithdraw = _feeOnWithdraw;\\n    emit FeeChanged(_feeOnDeposit, _feeOnWithdraw);\\n  }\\n\\n  function withdrawFeeAndReflection(address receiver) external onlyOwner {\\n    uint256 feesAndReflection = TRIBE.balanceOf(address(this)) - userBalances;\\n    TRIBE.transfer(receiver, feesAndReflection);\\n    emit WithdrawFeees(receiver, feesAndReflection);\\n  }\\n}\"\r\n    }\r\n  },\r\n  \"settings\": {\r\n    \"optimizer\": {\r\n      \"enabled\": true,\r\n      \"runs\": 20000\r\n    },\r\n    \"evmVersion\": \"paris\",\r\n    \"outputSelection\": {\r\n      \"*\": {\r\n        \"*\": [\r\n          \"evm.bytecode\",\r\n          \"evm.deployedBytecode\",\r\n          \"abi\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}}", "ABI": "[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"tribe\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"user\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Deposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"feeOnDeposit\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"feeOnWithdraw\",\"type\":\"uint256\"}],\"name\":\"FeeChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"user\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Withdraw\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"WithdrawFeees\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"TRIBE\",\"outputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_feeOnDeposit\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_feeOnWithdraw\",\"type\":\"uint256\"}],\"name\":\"changeFees\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"user\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feeBase\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feeOnDeposit\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feeOnWithdraw\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"recover\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_new\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"userBalances\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"user\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"}],\"name\":\"withdrawFeeAndReflection\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]", "ContractName": "TribeBotDeposits", "CompilerVersion": "v0.8.20+commit.a1b79de6", "OptimizationUsed": "1", "Runs": "20000", "ConstructorArguments": "000000000000000000000000deadface8503399df4b083ef42fa8e02fd39dead0000000000000000000000001b654174c1df970b00fc4e291a9d7572e3c405f5", "EVMVersion": "paris", "Library": "", "LicenseType": "MIT", "Proxy": "0", "Implementation": "", "SwarmSource": "ipfs://d3de67ab26c621b20326fce4004698f92a3b6b039fd6c1ae2b2093d88865ad4a"}