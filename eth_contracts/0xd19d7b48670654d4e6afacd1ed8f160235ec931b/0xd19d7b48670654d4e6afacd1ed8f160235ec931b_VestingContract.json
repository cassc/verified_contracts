{"SourceCode": "{\"IVestingContract.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.0;\\r\\n\\r\\ninterface IVestingContract {\\r\\n    function completeInitialization() external;\\r\\n}\"},\"VestingContract.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IVestingContract.sol\\\";\\n\\ninterface IERC20 {\\n\\n    function transfer(address recipient, uint256 amount) external returns (bool);\\n\\n}\\n\\ncontract VestingContract is IVestingContract {\\n\\n    struct VestingInfo {\\n        uint256 startingFrom;\\n        uint256 interval;\\n        uint256 tranches;\\n    }\\n\\n    struct VestingInput {\\n        VestingInfo info;\\n        address[] owners;\\n        uint256[] amounts;\\n    }\\n\\n    struct Vesting {\\n        uint256 infoIndex;\\n        uint256[] timestamps;\\n        uint256[] amounts;\\n    }\\n\\n    uint256 private constant ONE_HUNDRED = 1e18;\\n\\n    address public rewardToken;\\n\\n    mapping(address =\\u003e Vesting) private vestingOf;\\n\\n    VestingInfo[] public infos;\\n\\n    constructor(VestingInput[] memory inputs) {\\n        for(uint256 i = 0; i \\u003c inputs.length; i++) {\\n            VestingInput memory input = inputs[i];\\n            uint256 infoIndex = infos.length;\\n            infos.push(input.info);\\n            for(uint256 z = 0; z \\u003c input.owners.length; z++) {\\n                Vesting storage vesting = vestingOf[input.owners[z]];\\n                vesting.infoIndex = infoIndex;\\n                vesting.amounts.push(input.amounts[z]);\\n            }\\n        }\\n    }\\n\\n    function completeInitialization() external override {\\n        _setRewardToken(msg.sender);\\n    }\\n\\n    function claim(address owner) external returns (uint256 amount) {\\n        return _claim(rewardToken, owner, block.timestamp);\\n    }\\n\\n    function claimBatch(address[] calldata owners) external returns (uint256[] memory amounts) {\\n        amounts = new uint256[](owners.length);\\n        address token = rewardToken;\\n        uint256 blockTimestamp = block.timestamp;\\n        for(uint256 i = 0; i \\u003c owners.length; i++) {\\n            amounts[i] = _claim(token, owners[i], blockTimestamp);\\n        }\\n    }\\n\\n    function _claim(address token, address owner, uint256 blockTimestamp) private returns(uint256 amount) {\\n        if(token == address(0)) {\\n            return 0;\\n        }\\n        Vesting storage vesting = _prepareVesting(owner);\\n        if(vesting.amounts.length == 0) {\\n            return 0;\\n        }\\n        uint256[] memory timestamps = vesting.timestamps;\\n        for(uint256 i = 0; i \\u003c timestamps.length; i++) {\\n            if(timestamps[i] == 0) {\\n                continue;\\n            }\\n            if(blockTimestamp \\u003c timestamps[i]) {\\n                break;\\n            }\\n            vesting.timestamps[i] = 0;\\n            amount += vesting.amounts[i];\\n        }\\n        if(amount != 0) {\\n            _safeTransfer(token, owner, amount);\\n        }\\n    }\\n\\n    function _prepareVesting(address owner) private returns(Vesting storage vesting) {\\n        vesting = vestingOf[owner];\\n        if(vesting.amounts.length \\u003e 0 \\u0026\\u0026 vesting.timestamps.length == 0) {\\n            uint256 amount = vesting.amounts[0];\\n            vesting.amounts.pop();\\n            VestingInfo memory info = infos[vesting.infoIndex];\\n            uint256 splittedAmount = amount / info.tranches;\\n            uint256 startingFrom = info.startingFrom;\\n            startingFrom = startingFrom == 0 ? block.timestamp : startingFrom;\\n            for(uint256 i = 0; i \\u003c info.tranches; i++) {\\n                vesting.timestamps.push(startingFrom + (info.interval * i));\\n                vesting.amounts.push(splittedAmount);\\n            }\\n            vesting.amounts[vesting.amounts.length - 1] = (amount - (splittedAmount * (info.tranches - 1)));\\n        }\\n    }\\n\\n    function _setRewardToken(address token) private {\\n        require(rewardToken == address(0));\\n        rewardToken = token;\\n    }\\n\\n    function _safeTransfer(address erc20TokenAddress, address to, uint256 value) private {\\n        bytes memory returnData = _call(erc20TokenAddress, abi.encodeWithSelector(IERC20(erc20TokenAddress).transfer.selector, to, value));\\n        require(returnData.length == 0 || abi.decode(returnData, (bool)), \\u0027TRANSFER_FAILED\\u0027);\\n    }\\n\\n    function _call(address location, bytes memory payload) private returns(bytes memory returnData) {\\n        assembly {\\n            let result := call(gas(), location, 0, add(payload, 0x20), mload(payload), 0, 0)\\n            let size := returndatasize()\\n            returnData := mload(0x40)\\n            mstore(returnData, size)\\n            let returnDataPayloadStart := add(returnData, 0x20)\\n            returndatacopy(returnDataPayloadStart, 0, size)\\n            mstore(0x40, add(returnDataPayloadStart, size))\\n            switch result case 0 {revert(returnDataPayloadStart, size)}\\n        }\\n    }\\n}\"}}", "ABI": "[{\"inputs\":[{\"components\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"startingFrom\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interval\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"tranches\",\"type\":\"uint256\"}],\"internalType\":\"struct VestingContract.VestingInfo\",\"name\":\"info\",\"type\":\"tuple\"},{\"internalType\":\"address[]\",\"name\":\"owners\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"amounts\",\"type\":\"uint256[]\"}],\"internalType\":\"struct VestingContract.VestingInput[]\",\"name\":\"inputs\",\"type\":\"tuple[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"claim\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"owners\",\"type\":\"address[]\"}],\"name\":\"claimBatch\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"amounts\",\"type\":\"uint256[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"completeInitialization\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"infos\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"startingFrom\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interval\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"tranches\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"rewardToken\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]", "ContractName": "VestingContract", "CompilerVersion": "v0.8.24+commit.e11b9ed9", "OptimizationUsed": "1", "Runs": "200", "ConstructorArguments": "00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000017e0000000000000000000000000000000000000000000000000000000006610199f0000000000000000000000000000000000000000000000000000000000278d00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000c20000000000000000000000000000000000000000000000000000000000000005b000000000000000000000000132b06eddc1a0b62887102d3df9681116b66faa30000000000000000000000000c2299a73afb3ee6362eb8f5a96560b96087c4e5000000000000000000000000b466451ae1dd2e15972c4dfc9e67fc890cfb3bca00000000000000000000000061a3719229a3a7be9f31570907f8d265e3e3a0e3000000000000000000000000509ba2c637e973c5a242be909af43da41017bdf4000000000000000000000000f1d6ccc5183bd8d838b7e2869111c10e2e740a700000000000000000000000008c51028233bd3a4c416fde95f854f24cc26eef73000000000000000000000000cc8ab27dabaf74b98920bbc7b80d6c9142991c76000000000000000000000000a3ec13b559d2ef18405dcf8866415a4c629867010000000000000000000000005b5cc42c43e904522de608a04b067f026b433f77000000000000000000000000d07b357e51674e6de15ade5c1d0206523eff41dc00000000000000000000000028422efa12deecbd597bfc143016a06ae230fbf4000000000000000000000000351588019bf0e9cbffe2abab24bd4b23e843b3940000000000000000000000002ae8e3b450aa047bb3a02cf9425290a0629dd7ab000000000000000000000000972305200dfe3273a27b48f75b340fbb6a0e1c1a000000000000000000000000ad22fc4217c9a600d7a4d598dc8dba29f25320600000000000000000000000009c690b85cc33afc7f283d8ea29a63acae89830a7000000000000000000000000def7b0a92f01b97433c51227e209877b75ddcdb10000000000000000000000008938ef7ffbbeb475471696de5d1c22fa371959540000000000000000000000006ce2e2ffd47662d39d22bd728135339f50ac99ed000000000000000000000000e49b62367fbc914ff60d3dd041fa0b7fe80553a9000000000000000000000000036768fac96567e2de6ddb60de78e18d9bed501000000000000000000000000034defeb80d4b4acbef546dc20f732058a825ae6e0000000000000000000000006727eafa8ef2647d5837efb889f893786592c5c2000000000000000000000000471fd877dcc0c0e73068620cafc61143592e9e1f00000000000000000000000024f61e16e83dd90f26d8d15eeea343d4f8d303b20000000000000000000000006129b19150f53aa35a04bcc670797cbf93502fd2000000000000000000000000ab3eca5f99e4bf87aa9dd47cf93c8aa38320dc1e000000000000000000000000044fad988b9d2862a0d755d0fd19994b143c5cf1000000000000000000000000106f32ada3061947e40a53677b5778ffa614fbb90000000000000000000000000da646cc54aa177c24d31067695493d8ffcb865f000000000000000000000000a8d46110aba74997080c71b8bbf7edabba235d88000000000000000000000000c50a661ddeed4c6438d6e21df61260315d64dda5000000000000000000000000c39020a5f21233d09a7019f7f52d5654cbcacb32000000000000000000000000e779591d638bc1a47a169cdeda9cc73b501608040000000000000000000000002f9c68b2972be2b5327568d5ae89a9e7a239dfea000000000000000000000000a0663d52812f6d69dcf6b07a8ab17912cf51bdfb00000000000000000000000088dc8ad8654532bb109054577b151ffc8188a58a000000000000000000000000385d85de9b5004a0b322e3f669ce5b93eb2bb47700000000000000000000000041b839eb7b267e6c0d0502a01104d71e770ea1d10000000000000000000000002486da1bd29d5c846609bf06e5109846fb73fec10000000000000000000000008f260d15f271c96a91bd59e77dbab2d551115f77000000000000000000000000395cc98ee69fd3b539dc0966e1d997d1be0da29b000000000000000000000000092c65802c11e5e09b0d9ceb0acc24e458379de700000000000000000000000013a335fd8cb4a021b6d87aea9c612cde69d8bab6000000000000000000000000009bd311dd251b2dd624cda7c0727b0569fb8c280000000000000000000000006b5e7ddef30ed45871b27dae33506288a80fa54b0000000000000000000000000bdc23192abe9549689695c984d0fdf2d90c6319000000000000000000000000c2253f23da02c7d9a050478b22d670c6fec559550000000000000000000000001b8044362a1b4a525d06012753c692ce78369844000000000000000000000000a3c714526a46732ba5926a5ed6a6671b26405f080000000000000000000000008c18f44deb5d23a286a0a719402f0d7ee6a5262e000000000000000000000000d0fcc935e0a30877c581047943fcce3406bc7252000000000000000000000000a8ae4a3d431fc72cd9bea423027d1ba4f956ef9f0000000000000000000000002514a4e97a5e0bbad5e2859e08ac1d87819cd46a000000000000000000000000a35f243e756f4cfa58c562f8baf9f83425b48c5a000000000000000000000000d450b945a965664b00de1ce0096d6d303125db10000000000000000000000000af7f7e57f7ac53c61f6568f857e7aec010f967c3000000000000000000000000f5a838dbd68b60d4c25a97616510e0971250181e000000000000000000000000ade150b61ad3ae935b064a2274a0fd065606d2490000000000000000000000007c87fb619be461cc9b42730af8cd13d54010878e0000000000000000000000001b677b765ff6a97e4166a2c0a21313166e9b3c4f000000000000000000000000fffec45152c38214ed06e2e51756cf6181ae8341000000000000000000000000ce78a10c12e386dc287b0b67cf4f0d4389e6c0d5000000000000000000000000848ad6aa9621a09ec2ea6a9de54c782ded3ecaa100000000000000000000000082870fb197200228b9f70add31d8a525d91368bd0000000000000000000000003a4125a6bfc2e8102e7d94bd28eddb7ef11197c70000000000000000000000003a85d95a1f6fa5c44ad2b8e64e1ea847c906b31900000000000000000000000062faa04de92321023aa4a3cbda5ccb4cc3323a4b000000000000000000000000e313c8eead162d7f736fc85897962e5bfc2bf699000000000000000000000000f77fb186ec9c8a53d77e3fd6df621364fc4c2664000000000000000000000000e88ff1414bd4372ec92751213453472a6b0d2be80000000000000000000000000934cf844a3aad332a52561e51dc46f2db4304030000000000000000000000000000d37874487c1611226b6a35bdd38b7a12ddcd000000000000000000000000b6d6af9419938dc92eab296c934ced702f35550c0000000000000000000000003eb4ef1bab39c81b635976356b8ad7ea424c3c8700000000000000000000000011235878b6707c7145ef68f013d2e0b7971d898c000000000000000000000000ace528c040213907f90e390a7d32fae626b60721000000000000000000000000000000e21e2e6d1bfab3513fbe8f660e55564d33000000000000000000000000777772056c273536ae9ad6ce2f68379947d0ebed00000000000000000000000085ec294de9f6b05c79721cb6ddbfe971364596f90000000000000000000000006490c57e2b698f814669b18f57174f077bb10517000000000000000000000000fd4291de359d81fcb58d5f76bb2ff97dde064f3a0000000000000000000000001b2101a408c10c3275fbd2683e9e9d966bb51ba400000000000000000000000062b06b1b8d45fd968d478ce709157c3813e23b3b000000000000000000000000e5f2bfb0691ee3a29ba8dd6c8977c99bd129cfcd000000000000000000000000bfe2425e6209dd2e33ccf4c11ec1492dc71b4f890000000000000000000000003d89639d1972a8009d38cc6d509673c213deba7900000000000000000000000024ac2a60a6b733edfd37d5d8938c724fb8c59e560000000000000000000000002c6550d05d3300bd9d2b4dda386a4e8396a9764a00000000000000000000000072c2c51e61f1dc6fbf3f24cfc9ff741cb0ef91e9000000000000000000000000000000000000000000000000000000000000005b000000000000000000000000000000000000000000001e329f0d34662c851600000000000000000000000000000000000000000000003f8c64756befa13b40000000000000000000000000000000000000000000000001762ed34504c5950000000000000000000000000000000000000000000000001e50123e40d934f73200000000000000000000000000000000000000000000000badee961fe1c9fb00000000000000000000000000000000000000000000000001703dd47d5436b7d500000000000000000000000000000000000000000000001e55d8b96a844c44ac00000000000000000000000000000000000000000000000f2e2af505cf7bea8500000000000000000000000000000000000000000000001e443c1b85d409fe340000000000000000000000000000000000000000000000060cdc391bcc4821ae00000000000000000000000000000000000000000000001e40c5e46a090aeb74000000000000000000000000000000000000000000000054bb289e274091dbe0000000000000000000000000000000000000000000000054b4c57b038e7a8178000000000000000000000000000000000000000000000054bb66ffce2445d990000000000000000000000000000000000000000000000054c8eb97a8e1bd3320000000000000000000000000000000000000000000000054b8c65e616ccd050000000000000000000000000000000000000000000000001e404d1d8afd68a8660000000000000000000000000000000000000000000000183699c59d66d5d75d290000000000000000000000000000000000000000000008e39592091dea13f0f70000000000000000000000000000000000000000000026a70e563ff28c72539f0000000000000000000000000000000000000000000024332c03e670cb077af800000000000000000000000000000000000000000000236c051febd901a2506400000000000000000000000000000000000000000000238450293a71ac09100700000000000000000000000000000000000000000000127e248d16c1b7bfe14200000000000000000000000000000000000000000000224a14c61d27f23274f600000000000000000000000000000000000000000000101b26096ec78455e860000000000000000000000000000000000000000000000cf93235c6c68951c04d000000000000000000000000000000000000000000001cf83f689af64b27bc68000000000000000000000000000000000000000000001dcd949059d046e402d4000000000000000000000000000000000000000000001f5737b9d2377c6b0d6e000000000000000000000000000000000000000000000fa2335682bfbad8a5850000000000000000000000000000000000000000000015ef47f6ca827d83dffd000000000000000000000000000000000000000000001663d02825510881f05d000000000000000000000000000000000000000000002358cb0733567bd80ea7000000000000000000000000000000000000000000001dac0ef6af70ad5dbcc9000000000000000000000000000000000000000000001f7dd589d86ce674b124000000000000000000000000000000000000000000000e806c17195616c19328000000000000000000000000000000000000000000001e67225bf66e34a7e7ac0000000000000000000000000000000000000000000017d32faa017f0809068b000000000000000000000000000000000000000000001fa7ad9b04301e2aaede000000000000000000000000000000000000000000000be9731c688630ede555000000000000000000000000000000000000000000002060068bb2579a4b40e000000000000000000000000000000000000000000000082ca58a092b344808ba00000000000000000000000000000000000000000000191063ff809a09746fb10000000000000000000000000000000000000000000009cffbc526377b47c51b0000000000000000000000000000000000000000000029eabe3c9ab29150b52e000000000000000000000000000000000000000000000a5634f05a996fde20c200000000000000000000000000000000000000000000096a17e636c95abf2b1c000000000000000000000000000000000000000000001b193255bdf41e03d60e0000000000000000000000000000000000000000000018c2fcff38b7447eb7d9000000000000000000000000000000000000000000000d2bc840b073010d5d7b00000000000000000000000000000000000000000002a9ed11c4cfa8840a5a76000000000000000000000000000000000000000000001031473d88d5a4eba500000000000000000000000000000000000000000000003bb4fc0e7d3a863e6820000000000000000000000000000000000000000000000fa1902a105eac8edce00000000000000000000000000000000000000000000020035fd5c5068e3f37400000000000000000000000000000000000000000000041270e9da814a5539d20000000000000000000000000000000000000000000001f1b4fca3b8ca240e5c00000000000000000000000000000000000000000000100a72cdd8dfffcb35be0000000000000000000000000000000000000000000001aec34e3468e99be60800000000000000000000000000000000000000000000037960a574ac2d7aaadc0000000000000000000000000000000000000000000002e9e62e105dd91ed9b000000000000000000000000000000000000000000000036fe336d5af50cff94c0000000000000000000000000000000000000000000002f29b3e30558391c5b20000000000000000000000000000000000000000000003a8ae0b0d352f85bdf4000000000000000000000000000000000000000000000baa154748247687187a0000000000000000000000000000000000000000000004008644697a7fe55d6c00000000000000000000000000000000000000000000019b6696c75f4d66f2980000000000000000000000000000000000000000000003acba0d40d1c049acb00000000000000000000000000000000000000000000003af446a5d17ad48e18e000000000000000000000000000000000000000000000321fdde96bdf6c5f37200000000000000000000000000000000000000000000011f967f56eac58262b0000000000000000000000000000000000000000000000c8dcc385865737ccb9c0000000000000000000000000000000000000000000001b7ba6028359d0e3df4000000000000000000000000000000000000000000000147c53acca48b49beee0000000000000000000000000000000000000000000003dd9747120cf8e115320000000000000000000000000000000000000000000000f2cf947cd2743fc0e40000000000000000000000000000000000000000000002a57ffcc0f2d921ecb800000000000000000000000000000000000000000000025dcc86390f41fd9ecc0000000000000000000000000000000000000000000010f418ef9715ba0ba1840000000000000000000000000000000000000000000001b74a8b40ead0293d1d300000000000000000000000000000000000000000000192b4aac7d8c6d4c4b86000000000000000000000000000000000000000000002620f3f814beca1914a7000000000000000000000000000000000000000000000c0737e878381ef78136000000000000000000000000000000000000000000000c3e8bf25a61094b03ad00000000000000000000000000000000000000000000427b237dce5f11b6ad1d000000000000000000000000000000000000000000000c1ebab5990b330d41c50000000000000000000000000000000000000000000004f4b38dda2c04e1ad87000000000000000000000000000000000000000000000ea0c766e0ba933fd118000000000000000000000000000000000000000000001d8e0f83ea184d9160dd0000000000000000000000000000000000000000000059ff3c6578e8b6ef12bf0000000000000000000000000000000000000000000000000000000066744a0f000000000000000000000000000000000000000000000000000000000076a700000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000e3a0fd5783809d7fc07291492346c6852f903e1900000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000002bd72fc1d06d3255000000", "EVMVersion": "Default", "Library": "", "LicenseType": "MIT", "Proxy": "0", "Implementation": "", "SwarmSource": "ipfs://bece21bb945350dff4a86bfd7940404f3a8a8ee77a469ce3445b201b8dff16ba"}