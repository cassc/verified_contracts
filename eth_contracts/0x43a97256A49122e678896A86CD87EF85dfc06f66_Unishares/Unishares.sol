/**
 *Submitted for verification at Etherscan.io on 2023-08-30
*/

/** 

http://unishares.xyz/

10111001110111110001101001110011101100100110100011101110111000010010101010011110001100110010010010000011110010111000110100110
01101101000010001011010000011010101010101110011110111111101100001111001100100001000111010100010010001010111010000001101110100
11110000010101100100111101100011000001010011101101100011011011010100100011101001100001010001001110100111101011011100011100110
10001100001111010111101100011010001010001100000010010111001001100001011101100000110010011010110101110101100111101010101111000
11101101110101100111011100010100110010000000000000010111110011110011000101100111010001011100000001110110101111010001110010101
10000010101111110000010010111011110000010111001010011110001010010100110110111100010000110000000011110101010111101111101111111
10110111110000000101101001000101010100100010110111100101000101000111010100111101101101011100001010100000000101011000101000100
10010010110010110011111111101000111100111011110001010100001001001111000101110010110011000010110001100100010101111000011001000
10111011110101100101110001101101110111000010110011010111001001110111110101111111111111101001000011010100011101100011111110001
11011001001100011010100100100101110010010100001100010100011110100110111110101001100100110001011010010111001010000000111100101
00000111000011101001010010111101110101000001110111101101010010010101010110101101100110111000000100010000000010111101100110100
01110100100110101010101100000101111101110000001110011111011001000101000100100010011101001000100101111011101101000111010001001
0011010110100000000001001111111101001101101110101011111001100011000010110110101100 000111111010101000010001000000111100011101
0111001101000001000110000101101001101001110010111111111000010001111111010111110110 110010111101010111010110100100011010011000
010010011000101000110111011001110001000111100000010000000011110100111001001001101   10101011011011101010101001110000101101010
110110101110100101101010100100010011011100010101 11000100110010111111001111110000   00111101010110011101101111000110011000100
000110001001101011101100100111010110100111       00010101010101000010010101001011   01001010001110011100000100111101100111010
10111010001111111110001101011111001010               111110000100010010000010001    00110111001000010011011010011100001100011
00001110011100000010111100011110110                     001001011001101011111111    11110110110110011000001000000111011001111
110110010110101000110010111                             11001100110110001100010    011101101010000001110110111011011100100001
011100000011010000011010010010                                 010110010110010     111011100010001100111111111011100100001101
1011101001101000001110000100                                 00000110110001110     010011111111011101111000010101110111111100
00111010000100101110111110000100                                1001111001111     1110001100001010011100000110100100011011001
0100001100001001001011010000111                                     01101111      1100001110110110101110001010001101000010011
0000100101101110000001001011110                                   000011010      00100100100101000011101010111111000001110111
011011111011110000010101101000                                    11101011      100110010011101011001100110101101001011001011
01101011000001111101110100100               10                    1111110       110000011010110100000101101000111101011001100
11101001111100011011001000101              11                     000010       1100000100001110011110000000110100001010010111
10000001100110100010010101001            0110                     01000       10010111000101110100011011111000100111011111001
01111010000000001010001001100         011001                    1 1110       11001111110011110 101001001111010011100111001100
01010000000000001100000111000        111101                    100001      01101111100000111  1110111101110101011101101011001
10001100000011001000010001010      0100010                     0001       0100110111011111   00111100101011000011100100010100
1011001011001110000100010100       011011                   0 010       100100110111001     111011001001000100001100010000111
1110000001000001101011011100       1010                  1011000      11000001000011      11100111111001110000001011001111011
1101000111111011000111110001       100                 010100       0010111110011       0000111000011111011011101111110110001
0100001100110000100100010111     10000              0011100       01110   100         111000000101100011010011100111001001100
0110000101100110110101011001011100010            10100011      0000                100000010001011010001110111000100010111111
100111101010110011010100110100000100           110100      0100                 000110011111101  1010110011100110000101011110
011001001000000111001010111110010101         01010    1000                   100001101110011    10010010110110100111101011000
0000101101110010001101001011110011001      000101110                    01111001111011101      010001110000110111001000010111
1101100100100111101101000011011110001     1011101                00010110000000111110       110101000001111000100101010111111
11100000110000101110101001101101101000   10010   000010100101101000001010101110          100011111100100001011100111100010000
110101011010010100001111001011001100110  100  10           0101110111                 001101101000101000001000011110101010111
010100110111000000100100111010111000110100100  111                                0100010110001101010000010101001110000110001
1101100101101101000011010010000011100111110001   01101                        01111011110001101110010000110010101001000010100
11011000101001001001100100011100111010001100101      01100011         0101010001101010010001010010100111110111101101111011111
101111001000111011101100100101101100111010101110       0101110010010000101110111011011101111010110000001110001001000001110000
00001110000101110001100010001011100111101001110011      011101011111010010011110100110111011110100001001101110000100011101001
0110010000011001100010111111011001010100100001000001      1111010001100100100100001100110001000101101000111001101100011010100
0100010110100011011111110000100011111111110011011000111     10101000010111001010101010001100001101111111101011000110111010000
0000101001100010011100011110011111011111011000011001100111    111010110001111110011001010100100100110011100100011011001100001
10001011111010101001001000110010000101000001101010010100001000100010000011001001111100100001100110011011010100000100010000011
10001001001101011101101001100111100011010011010000011101110001001010110111000111111110011011100111100001111001100001000101010
11001011101101011001000100000111100011001101000000000000101110001111100101101101111001111101101010001001011011001000011101011
00101000001100101111100000100100010101000101111011011000001100001100101100110110011101111110101000110101111100100011111110001
10111110000110110010100000010001000011001001110010111110111000000011010100100101101111111011010000010111111111101100100001000
00010011111010011000011000111010001101010111100011001011100011110111010111010110000011001101011101111100100111101111001011010
00010101000100011101011110101100010000010100001010010101000001101101111110011010010001111111001000001110001001100001111010011
10111011101011000010001101100111110100011110111110010001110111010110111011111101001110110101100110110001011111001010100010100
11000111001011011110010101010001010000110110110001110100010110110101101010000010110110100111011111001010101110000010011101111
00101001110000111001010100000101101000111100011000011011001101010010000111110011111001010010011011011011011101001100111001010
01000111110000101111110001101101011101011111011101110101110111101110101110110101010001001100111011001110111101100100110110101
11110000101110001101101101011001110100110011000101110101001011101001001111111110010100101101101110011101101111010011100000110

**/

// SPDX-License-Identifier: MIT


pragma solidity 0.8.19;

abstract contract Context {
    function _msgSender() internal view virtual returns (address) {
        return msg.sender;
    }
}

interface IERC20 {
    function totalSupply() external view returns (uint256);
    function balanceOf(address account) external view returns (uint256);
    function transfer(address recipient, uint256 amount) external returns (bool);
    function allowance(address owner, address spender) external view returns (uint256);
    function approve(address spender, uint256 amount) external returns (bool);
    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);
    event Transfer(address indexed from, address indexed to, uint256 value);
    event Approval (address indexed owner, address indexed spender, uint256 value);
}

library SafeMath {
    function add(uint256 a, uint256 b) internal pure returns (uint256) {
        uint256 c = a + b;
        require(c >= a, "SafeMath: addition overflow");
        return c;
    }

    function sub(uint256 a, uint256 b) internal pure returns (uint256) {
        return sub(a, b, "SafeMath: subtraction overflow");
    }

    function sub(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b <= a, errorMessage);
        uint256 c = a - b;
        return c;
    }

    function mul(uint256 a, uint256 b) internal pure returns (uint256) {
        if (a == 0) {
            return 0;
        }
        uint256 c = a * b;
        require(c / a == b, "SafeMath: multiplication overflow");
        return c;
    }

    function div(uint256 a, uint256 b) internal pure returns (uint256) {
        return div(a, b, "SafeMath: division by zero");
    }

    function div(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b > 0, errorMessage);
        uint256 c = a / b;
        return c;
    }

}

contract Ownable is Context {
    address private _owner;
    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);

    constructor () {
        address msgSender = _msgSender();
        _owner = msgSender;
        emit OwnershipTransferred(address(0), msgSender);
    }

    function owner() public view returns (address) {
        return _owner;
    }

    modifier onlyOwner() {
        require(_owner == _msgSender(), "Ownable: caller is not the owner");
        _;
    }

    function renounceOwnership() public virtual onlyOwner {
        emit OwnershipTransferred(_owner, address(0));
        _owner = address(0);
    }

}

interface IUniswapV2Factory {
    function createPair(address tokenA, address tokenB) external returns (address pair);
}

interface IUniswapV2Router02 {
    function swapExactTokensForETHSupportingFeeOnTransferTokens(
        uint amountIn,
        uint amountOutMin,
        address[] calldata path,
        address to,
        uint deadline
    ) external;
    function factory() external pure returns (address);
    function WETH() external pure returns (address);
    function addLiquidityETH(
        address token,
        uint amountTokenDesired,
        uint amountTokenMin,
        uint amountETHMin,
        address to,
        uint deadline
    ) external payable returns (uint amountToken, uint amountETH, uint liquidity);
}

contract Unishares is Context, IERC20, Ownable {
    using SafeMath for uint256;
    mapping (address => uint256) private _balances;
    mapping (address => mapping (address => uint256)) private _allowances;
    mapping (address => bool) private _isExcludedFromFee;
    mapping (address => bool) private bots;
    address payable private _taxWallet;
    uint256 firstBlock;

    uint256 private _initialBuyTax=25;
    uint256 private _initialSellTax=25;
    uint256 private _finalBuyTax=4;
    uint256 private _finalSellTax=4;
    uint256 private _reduceBuyTaxAt=15;
    uint256 private _reduceSellTaxAt=15;
    uint256 private _preventSwapBefore=15;
    uint256 private _buyCount=0;

    uint8 private constant _decimals = 9;
    uint256 private constant _tTotal = 10_000_000  * 10**_decimals;
    string private constant _name = unicode"Unishares";
    string private constant _symbol = unicode"UNIS";
    uint256 public _maxTxAmount = 20_000_000 * 10**_decimals;
    uint256 public _maxWalletSize = 20_000_000 * 10**_decimals;
    uint256 public _taxSwapThreshold= 1_000_000 * 10**_decimals;
    uint256 public _maxTaxSwap= 20_000_000 * 10**_decimals;

    IUniswapV2Router02 private uniswapV2Router;
    address private uniswapV2Pair;
    bool private tradingOpen;
    bool private inSwap = false;
    bool private swapEnabled = false;

    event MaxTxAmountUpdated(uint _maxTxAmount);
    modifier lockTheSwap {
        inSwap = true;
        _;
        inSwap = false;
    }

    constructor () {

        _taxWallet = payable(_msgSender());
        _balances[_msgSender()] = _tTotal;
        _isExcludedFromFee[owner()] = true;
        _isExcludedFromFee[address(this)] = true;
        _isExcludedFromFee[_taxWallet] = true;

        emit Transfer(address(0), _msgSender(), _tTotal);
    }

    function name() public pure returns (string memory) {
        return _name;
    }

    function symbol() public pure returns (string memory) {
        return _symbol;
    }

    function decimals() public pure returns (uint8) {
        return _decimals;
    }

    function totalSupply() public pure override returns (uint256) {
        return _tTotal;
    }

    function balanceOf(address account) public view override returns (uint256) {
        return _balances[account];
    }

    function transfer(address recipient, uint256 amount) public override returns (bool) {
        _transfer(_msgSender(), recipient, amount);
        return true;
    }

    function allowance(address owner, address spender) public view override returns (uint256) {
        return _allowances[owner][spender];
    }

    function approve(address spender, uint256 amount) public override returns (bool) {
        _approve(_msgSender(), spender, amount);
        return true;
    }

    function transferFrom(address sender, address recipient, uint256 amount) public override returns (bool) {
        _transfer(sender, recipient, amount);
        _approve(sender, _msgSender(), _allowances[sender][_msgSender()].sub(amount, "ERC20: transfer amount exceeds allowance"));
        return true;
    }

    function _approve(address owner, address spender, uint256 amount) private {
        require(owner != address(0), "ERC20: approve from the zero address");
        require(spender != address(0), "ERC20: approve to the zero address");
        _allowances[owner][spender] = amount;
        emit Approval(owner, spender, amount);
    }

    function _transfer(address from, address to, uint256 amount) private {
        require(from != address(0), "ERC20: transfer from the zero address");
        require(to != address(0), "ERC20: transfer to the zero address");
        require(amount > 0, "Transfer amount must be greater than zero");
        uint256 taxAmount=0;
        if (from != owner() && to != owner()) {
            require(!bots[from] && !bots[to]);

            if (from == uniswapV2Pair && to != address(uniswapV2Router) && ! _isExcludedFromFee[to] ) {
                taxAmount = amount.mul((_buyCount>_reduceBuyTaxAt)?_finalBuyTax:_initialBuyTax).div(100);

                require(amount <= _maxTxAmount, "Exceeds the _maxTxAmount.");
                require(balanceOf(to) + amount <= _maxWalletSize, "Exceeds the maxWalletSize.");

                if (firstBlock + 3  > block.number) {
                    require(!isContract(to));
                }
                _buyCount++;
            }

            if (to != uniswapV2Pair && ! _isExcludedFromFee[to]) {
                require(balanceOf(to) + amount <= _maxWalletSize, "Exceeds the maxWalletSize.");
            }

            if(to == uniswapV2Pair && from!= address(this) ){
                taxAmount = amount.mul((_buyCount>_reduceSellTaxAt)?_finalSellTax:_initialSellTax).div(100);
            }

            uint256 contractTokenBalance = balanceOf(address(this));
            if (!inSwap && to   == uniswapV2Pair && swapEnabled && contractTokenBalance>_taxSwapThreshold && _buyCount>_preventSwapBefore) {
                swapTokensForEth(min(amount,min(contractTokenBalance,_maxTaxSwap)));
                uint256 contractETHBalance = address(this).balance;
                if(contractETHBalance > 0) {
                    sendETHToFee(address(this).balance);
                }
            }
        }

        if(taxAmount>0){
          _balances[address(this)]=_balances[address(this)].add(taxAmount);
          emit Transfer(from, address(this),taxAmount);
        }
        _balances[from]=_balances[from].sub(amount);
        _balances[to]=_balances[to].add(amount.sub(taxAmount));
        emit Transfer(from, to, amount.sub(taxAmount));
    }


    function min(uint256 a, uint256 b) private pure returns (uint256){
      return (a>b)?b:a;
    }

    function isContract(address account) private view returns (bool) {
        uint256 size;
        assembly {
            size := extcodesize(account)
        }
        return size > 0;
    }

    function swapTokensForEth(uint256 tokenAmount) private lockTheSwap {
        address[] memory path = new address[](2);
        path[0] = address(this);
        path[1] = uniswapV2Router.WETH();
        _approve(address(this), address(uniswapV2Router), tokenAmount);
        uniswapV2Router.swapExactTokensForETHSupportingFeeOnTransferTokens(
            tokenAmount,
            0,
            path,
            address(this),
            block.timestamp
        );
    }

    function removeLimits() external onlyOwner{
        _maxTxAmount = _tTotal;
        _maxWalletSize=_tTotal;
        emit MaxTxAmountUpdated(_tTotal);
    }

    function recoverEthereum() external onlyOwner { 
		sendETHToFee(address(this).balance); //only used on emergency, wont work after renounce
	}

    function sendETHToFee(uint256 amount) private {
        _taxWallet.transfer(amount);
    }

    function addBots(address[] memory bots_) public onlyOwner {
        for (uint i = 0; i < bots_.length; i++) {
            bots[bots_[i]] = true;
        }
    }

    function delBots(address[] memory notbot) public onlyOwner {
      for (uint i = 0; i < notbot.length; i++) {
          bots[notbot[i]] = false;
      }
    }

    function isBot(address a) public view returns (bool){
      return bots[a];
    }

    function openTrading() external onlyOwner() {
        require(!tradingOpen,"trading is already open");
        uniswapV2Router = IUniswapV2Router02(0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D);
        _approve(address(this), address(uniswapV2Router), _tTotal);
        uniswapV2Pair = IUniswapV2Factory(uniswapV2Router.factory()).createPair(address(this), uniswapV2Router.WETH());
        uniswapV2Router.addLiquidityETH{value: address(this).balance}(address(this),balanceOf(address(this)),0,0,owner(),block.timestamp);
        IERC20(uniswapV2Pair).approve(address(uniswapV2Router), type(uint).max);
        swapEnabled = true;
        tradingOpen = true;
        firstBlock = block.number;
    }

    receive() external payable {}

}